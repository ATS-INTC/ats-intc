<?xml version="1.0" encoding="utf-8"?>

<device schemaVersion="1.3"
  xmlns:xs="http://www.w3.org/2001/XMLSchema-instance"
  xs:noNamespaceSchemaLocation="cmsis-svd.xsd">
  <name>ats-intc</name>
  <version>0.0</version>
  <description>Asynchronous task scheduler and Interrupt controller description</description>

  <addressUnitBits>8</addressUnitBits>                  <!-- byte addressable memory -->
  <width>64</width>                                     <!-- bus width is 64 bits -->
  <size>64</size>                                       <!-- this is the default size (number of bits) of all peripherals
                                                                       and register that do not define "size" themselves -->
  <resetValue>0x0000000000000000</resetValue>                   <!-- by default all bits of the registers are initialized to 0
  on reset -->
  <resetMask>0xFFFFFFFFFFFFFFFF</resetMask>                     <!-- by default all 32Bits of the registers are used -->

  <peripherals>
    <peripheral>
      <name>ATS-INTC</name>
      <description>Asynchronous task scheduler, IPC controller and Interrupt controller description</description>
      <baseAddress>0x10000000</baseAddress>     <!-- mmio baseaddr -->
      <size>64</size>            <!-- default bit-width of any register contained in the device -->
      <addressBlock>
        <offset>0x0</offset>
        <size>0x1000000</size>
        <usage>registers</usage>
      </addressBlock>

      <registers>
        <cluster>
          <dim>4096</dim>
          <dimIncrement>0x1000</dimIncrement>
          <dimName>processes</dimName>
          <name>process%s</name>
          <description>Related registers of one process</description>
          <addressOffset>0x0</addressOffset>
          <access>read-write</access>

          <cluster>
            <name>ats</name>
            <description>Async task scheduler of one process</description>
            <addressOffset>0x0</addressOffset>
            <access>read-write</access>

            <register>
              <name>dequeue</name>
              <description>The priority queue dequeue register</description>
              <addressOffset>0x0</addressOffset>
              <access>read-only</access>
              <dataType>uint64_t</dataType>
            </register>

            <register>
              <dim>255</dim>
              <dimIncrement>0x8</dimIncrement>
              <dimName>enqueue</dimName>
              <name>enqueue%s</name>
              <description>The priority queue enqueue registers</description>
              <addressOffset>0x08</addressOffset>
              <access>write-only</access>
              <dataType>uint64_t</dataType>
            </register>
          </cluster>

          <cluster>
            <name>ipcc</name>
            <description>IPC controller of one process</description>
            <addressOffset>0x800</addressOffset>
            <access>read-write</access>

            <register>
              <name>send</name>
              <description>The IPC send register</description>
              <addressOffset>0x0</addressOffset>
              <access>write-only</access>
              <dataType>uint64_t</dataType>
            </register>

            <register>
              <dim>31</dim>
              <dimIncrement>0x08</dimIncrement>
              <dimName>ipc-bq-regs</dimName>
              <name>ipc-bq%s</name>
              <description>Block queue enqueue registers</description>
              <addressOffset>0x08</addressOffset>
              <access>write-only</access>
              <dataType>uint64_t</dataType>
            </register>
          </cluster>

          <cluster>
            <name>intc</name>
            <description>Interrupt controller</description>
            <addressOffset>0x900</addressOffset>
            <access>read-write</access>

            <register>
              <dim>224</dim>
              <dimIncrement>0x8</dimIncrement>
              <dimName>intr enqueue</dimName>
              <name>intr-enqueue%s</name>
              <description>Interrupt handler queue enqueue register</description>
              <addressOffset>0x0</addressOffset>
              <access>write-only</access>
              <dataType>uint64_t</dataType>
            </register>
          </cluster>
        </cluster>

      </registers>
    </peripheral>
  </peripherals>

</device>